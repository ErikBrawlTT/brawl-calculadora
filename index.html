<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculadora Brawl Stars</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
  body {
    margin: 0;
    font-family: 'Bangers', cursive;
    background: url('Personajes-Brawl-Stars.webp') no-repeat center center fixed;
    background-size: cover;
    position: relative;
    color: white;
    text-align: center;
  }
  body::after {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(6px);
    z-index: 0;
  }
  .container {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
  }
  h1 {
    font-size: 3rem;
    margin-bottom: 20px;
    background: linear-gradient(90deg, #00FFFF, #FF00FF, #FFD700);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }
  form {
    background: rgba(0,0,0,0.5);
    border-radius: 20px;
    padding: 20px;
    width: 90%;
    max-width: 600px;
    margin-bottom: 25px;
  }
  label {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
    font-size: 1.2rem;
  }
  input {
    width: 100px;
    text-align: center;
    border-radius: 8px;
    border: none;
    padding: 5px;
  }
  .buttons {
    display: flex;
    justify-content: center;
    gap: 25px;
    margin-top: 15px;
  }
  button {
    padding: 10px 20px;
    border: none;
    border-radius:12px;
    font-size:1.5rem;
    color:white;
    font-family:'Bangers';
    cursor:pointer;
    transition:0.2s;
  }
  button:active { transform:scale(.92) }
  #calcBtn  { background:linear-gradient(90deg,#ff0080,#7928ca); }
  #clearBtn { background:linear-gradient(90deg,#00CFFF,#0077FF); }
  #shareBtn{ background:linear-gradient(90deg,#00FFAA,#FF00FF);animation:pulse 1s infinite; }
  @keyframes pulse {
    0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}
  }
  #resultado{margin-top:10px;font-size:1.8rem;color:#00FFAA;}
  canvas{margin-top:15px;max-width:400px;}
  .visitas{margin-top:10px;font-size:1.3rem;color:#FFD700;}
</style>
</head>
<body>
<div class="container">
  <h1>💎 Calculadora Brawl Stars 💎</h1>
  <form id="calcForm">
    <label>🎟️ Brawl Pass: <input type="number" id="bpass" value="0"></label>
    <label>🩵 Comunes: <input type="number" id="comunes" value="0"></label>
    <label>💚 Raras: <input type="number" id="raras" value="0"></label>
    <label>💜 Épicas: <input type="number" id="epicas" value="0"></label>
    <label>❤️ Míticas: <input type="number" id="miticas" value="0"></label>
    <label>🌟 Legendarias: <input type="number" id="legendarias" value="0"></label>
    <label>⚡ Hipercarga: <input type="number" id="hipercarga" value="0"></label>
    <label>🔥 Maxeados: <input type="number" id="maxeados" value="0"></label>
  </form>

  <div class="buttons">
    <button id="calcBtn">Calcular</button>
    <button id="clearBtn">Limpiar</button>
    <button id="shareBtn">📤 Compartir</button>
  </div>

  <!-- Resultado debajo de los botones -->
  <div id="resultado">Valor total: 0 €</div>

  <!-- Gráfico -->
  <canvas id="myChart" width="400" height="400"></canvas>

  <div class="visitas">👀 Visitas: <span id="visitas">7.156</span></div>
</div>

<script>
let chart;

// Confeti lento
function lanzarConfeti() {
  const duration = 4000;
  const end = Date.now() + duration;
  (function frame() {
    confetti({
      particleCount: 20,
      startVelocity: 8,
      spread: 360,
      origin: { x: Math.random(), y: Math.random()*0.4 },
      colors: ['#ff0000','#00ff00','#0000ff','#ffff00','#ff00ff','#00ffff']
    });
    if (Date.now() < end) requestAnimationFrame(frame);
  })();
}

function playBeep(freq) {
  const ctx = new (window.AudioContext||window.webkitAudioContext)();
  const osc = ctx.createOscillator(), gain=ctx.createGain();
  osc.type="square"; osc.frequency.value=freq;
  osc.connect(gain); gain.connect(ctx.destination);
  gain.gain.setValueAtTime(0.2, ctx.currentTime);
  osc.start(); osc.stop(ctx.currentTime + 0.15);
}

function vibrar(ms=100){ if(navigator.vibrate) navigator.vibrate(ms); }

function calcular(){
  playBeep(600); vibrar(80);
  const valores={
    "🎟️ Brawl Pass": bpass.value*10,
    "🩵 Comunes": comunes.value*2,
    "💚 Raras": raras.value*5,
    "💜 Épicas": epicas.value*10,
    "❤️ Míticas": miticas.value*12,
    "🌟 Legendarias": legendarias.value*15,
    "⚡ Hipercarga": hipercarga.value*20,
    "🔥 Maxeados": maxeados.value*50
  };
  const total = Object.values(valores).reduce((a,b)=>a+b,0);
  resultado.innerText="Valor total: "+total+" €";

  const data={labels:Object.keys(valores), datasets:[{ data:Object.values(valores),
    backgroundColor:["#1E90FF","#CCCCCC","#00FF00","#800080","#FF0000","#FFD700","#FF8C00","#FF1493"],
    borderColor:"#111",borderWidth:2 }]};

  if(chart) chart.destroy();
  chart=new Chart(myChart.getContext("2d"),{type:"doughnut",data:data,options:{plugins:{legend:{labels:{color:"white"}}}}});

  lanzarConfeti();
}

function limpiar(){
  playBeep(400); vibrar(80);
  calcForm.reset();
  resultado.innerText="Valor total: 0 €";
  if(chart) chart.destroy();
}

function compartir(){
  playBeep(800); vibrar(120);
  if(navigator.share){
    navigator.share({title:"Calculadora Brawl Stars",text:"¡Mira mi cálculo!",url:location.href});
  }else alert("Tu navegador no soporta compartir directamente.");
}

calcBtn.onclick=e=>{e.preventDefault();calcular();}
clearBtn.onclick=e=>{e.preventDefault();limpiar();}
shareBtn.onclick=e=>{e.preventDefault();compartir();}
</script>
</body>
</html>
