<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculadora Brawl Stars</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    margin: 0;
    font-family: 'Bangers', cursive;
    background: url('Personajes-Brawl-Stars.webp') no-repeat center center fixed;
    background-size: cover;
    position: relative;
  }
  body::after {
    content: "";
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(6px);
    z-index: 0;
  }
  .container {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    color: white;
    text-align: center;
  }
  h1 {
    font-size: 3rem;
    margin-bottom: 20px;
    background: linear-gradient(90deg, #00FFFF, #FF00FF, #FFD700);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .brawl-btn {
    font-family: 'Bangers', cursive;
    padding: 10px 20px;
    font-size: 1.5rem;
    margin:0 8px;
    border:none;
    border-radius:12px;
    background: linear-gradient(90deg,#ff0080,#7928ca);
    color:white;
    cursor:pointer;
    box-shadow:0 0 15px rgba(255,0,128,0.8);
    transition:all .2s;
  }
  .brawl-btn:hover {
    transform:scale(1.05);
    box-shadow:0 0 25px rgba(255,0,128,1);
  }
  #resultado {
    margin-top:15px;
    font-size:1.5rem;
    color:#00FFAA;
    text-shadow:2px 2px 4px #000;
  }
  .visitas {
    margin-top:10px;
    font-size:1.3rem;
    color:#FFD700;
    text-shadow:2px 2px 5px #000;
  }
  #fireworksCanvas {
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:2;
  }
</style>
</head>
<body>
<canvas id="fireworksCanvas"></canvas>

<div class="container">
  <h1>ğŸ’ Calculadora Brawl Stars ğŸ’</h1>

  <form id="calcForm">
    <label>ğŸŸï¸ Brawl Pass: <input type="number" id="bpass" value="0"></label>
    <label>ğŸ‘• Skins Comunes: <input type="number" id="comunes" value="0"></label>
    <label>ğŸ’š Skins Raras: <input type="number" id="raras" value="0"></label>
    <label>ğŸ’œ Skins Ã‰picas: <input type="number" id="epicas" value="0"></label>
    <label>â¤ï¸ Skins MÃ­ticas: <input type="number" id="miticas" value="0"></label>
    <label>ğŸŒŸ Skins Legendarias: <input type="number" id="legendarias" value="0"></label>
    <label>âš¡ Skins Hipercarga: <input type="number" id="hipercarga" value="0"></label>
    <label>ğŸ”¥ Brawlers Maxeados: <input type="number" id="maxeados" value="0"></label>
    <div style="margin-top:15px;">
      <button type="button" class="brawl-btn" onclick="calcular()">Calcular</button>
      <button type="button" class="brawl-btn" onclick="limpiar()">Limpiar</button>
    </div>
  </form>

  <div id="resultado">Valor total: 0 â‚¬</div>
  <div class="visitas">ğŸ‘€ Visitas: <span id="visitas">0</span></div>

  <canvas id="myChart" width="400" height="400" style="margin-top:20px;"></canvas>
</div>

<!-- sonido -->
<audio id="sonidoBrawl" src="https://www.myinstants.com/media/sounds/legendary-star-drop-brawl-stars-189.mp3"></audio>

<script>
// contador de visitas
fetch('https://api.countapi.xyz/hit/calculadora-brawl/vercel')
  .then(r => r.json())
  .then(d => document.getElementById('visitas').innerText = d.value);

let chart;

function calcular(){
  // Sonido
  const sonido = document.getElementById("sonidoBrawl");
  sonido.currentTime = 0;
  sonido.play();

  // Calculo
  const valores = {
    "ğŸŸï¸ Brawl Pass": document.getElementById("bpass").value *10,
    "ğŸ‘• Comunes":    document.getElementById("comunes").value *2,
    "ğŸ’š Raras":      document.getElementById("raras").value *5,
    "ğŸ’œ Ã‰picas":     document.getElementById("epicas").value *10,
    "â¤ï¸ MÃ­ticas":    document.getElementById("miticas").value *12,
    "ğŸŒŸ Legendarias":document.getElementById("legendarias").value *15,
    "âš¡ Hipercarga": document.getElementById("hipercarga").value *20,
    "ğŸ”¥ Maxeados":   document.getElementById("maxeados").value *50
  };
  const total = Object.values(valores).reduce((a,b)=>a+b,0);
  document.getElementById("resultado").innerText="Valor total: "+total+" â‚¬";

  // GrÃ¡fico
  const data = {labels:Object.keys(valores),datasets:[{data:Object.values(valores),
    backgroundColor:["#1E90FF","#CCCCCC","#00FF00","#800080","#FF0000","#FFD700","#FF8C00","#FF1493"],
    borderColor:"#111",borderWidth:2}]};
  if(chart) chart.destroy();
  chart = new Chart(document.getElementById("myChart").getContext("2d"),{
    type:"doughnut",data:data,options:{plugins:{legend:{labels:{color:"white",font:{size:14}}}}}
  });

  lanzarFuegos();
}

// reset
function limpiar(){
  ['bpass','comunes','raras','epicas','miticas','legendarias','hipercarga','maxeados'].forEach(id=>{
    document.getElementById(id).value = 0;
  });
  document.getElementById("resultado").innerText="Valor total: 0 â‚¬";
  if(chart){ chart.destroy(); }
}

// fuegos artificiales RGB
function lanzarFuegos() {
  const canvas = document.getElementById("fireworksCanvas");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  const particles = [];
  for(let i=0;i<80;i++){
    particles.push({
      x: Math.random()*canvas.width,
      y: canvas.height,
      vx:(Math.random()-0.5)*8,
      vy:-Math.random()*12-4,
      color:`hsl(${Math.random()*360},100%,50%)`,
      opacity:1
    });
  }

  const start = Date.now();
  const duracion = 4000;
  (function anim(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.2;
      p.opacity -= 0.01;
      ctx.fillStyle = p.color.replace(')',`,${p.opacity})`).replace('hsl','hsla');
      ctx.beginPath();
      ctx.arc(p.x,p.y,4,0,Math.PI*2);
      ctx.fill();
    });

    if(Date.now()-start < duracion){
      requestAnimationFrame(anim)
    } else {
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }
  })();
}
</script>
</body>
</html>
