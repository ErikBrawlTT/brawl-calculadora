<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculadora Brawl Stars</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
body {margin:0;font-family:'Bangers',cursive;background:url('Personajes-Brawl-Stars.webp') no-repeat center center fixed;background-size:cover;position:relative;color:white;text-align:center;}
body::after {content:"";position:fixed;inset:0;background:rgba(0,0,0,0.6);backdrop-filter:blur(6px);z-index:0;}
.container{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:20px;}
h1{font-size:3rem;margin-bottom:20px;display:flex;align-items:center;justify-content:center;gap:10px;color:transparent;background:linear-gradient(90deg,#00FFAA,#00CFFF,#FF00FF);-webkit-background-clip:text;position:relative;}
h1 .diamond{animation:glow 2s infinite alternate;}
@keyframes glow{0%{text-shadow:0 0 5px rgba(255,255,255,0.5);}50%{text-shadow:0 0 15px rgba(255,255,255,1);}100%{text-shadow:0 0 5px rgba(255,255,255,0.5);}}
form{background:rgba(0,0,0,0.5);border-radius:20px;padding:20px;max-width:600px;width:90%;margin-bottom:25px;}
label{display:flex;justify-content:space-between;margin:8px 0;}
input{width:100px;text-align:center;border:none;border-radius:8px;}
.buttons{display:flex;justify-content:center;gap:25px;margin-top:15px;}
button{padding:10px 20px;border:none;border-radius:12px;font-family:'Bangers';font-size:1.5rem;color:white;cursor:pointer;}
#calcBtn{background:linear-gradient(90deg,#ff0080,#7928ca);}
#clearBtn{background:linear-gradient(90deg,#00CFFF,#0077FF);}
#shareBtn{background:linear-gradient(90deg,#00FFAA,#FF00FF);margin-top:20px;animation:pulse 1s infinite;}
@keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.1);}100%{transform:scale(1);}}
#resultado{margin-top:10px;font-size:1.8rem;color:#00FFAA;}
.visitas{margin-top:10px;font-size:1.4rem;color:#FFD700;}
canvas{margin-top:15px;max-width:400px;position:relative;}
#centerDiamond{position:absolute;font-size:50px;left:50%;top:50%;transform:translate(-50%,-50%) rotate(0deg);z-index:5;text-shadow:0 0 15px #00FFFF,0 0 25px #FF00FF,0 0 35px #FFD700;display:none;}
</style>
</head>
<body>
<div class="container">
  <h1><span class="diamond">üíé</span> Calculadora Brawl Stars <span class="diamond">üíé</span></h1>

  <form id="calcForm">
    <label>üéüÔ∏è Brawl Pass: <input type="number" id="bpass" value="0"></label>
    <label>ü©µ Comunes: <input type="number" id="comunes" value="0"></label>
    <label>üíö Raras: <input type="number" id="raras" value="0"></label>
    <label>üíú √âpicas: <input type="number" id="epicas" value="0"></label>
    <label>‚ù§Ô∏è M√≠ticas: <input type="number" id="miticas" value="0"></label>
    <label>üåü Legendarias: <input type="number" id="legendarias" value="0"></label>
    <label>‚ö° Hipercarga: <input type="number" id="hipercarga" value="0"></label>
    <label>üî• Maxeados: <input type="number" id="maxeados" value="0"></label>
  </form>

  <div class="buttons">
    <button id="calcBtn">Calcular</button>
    <button id="clearBtn">Limpiar</button>
  </div>

  <button id="shareBtn">üì§ Compartir</button>

  <div id="resultado">Valor total: 0 ‚Ç¨</div>
  <div class="visitas">üëÄ Visitas: <span id="visitas">0</span></div>

  <div style="position:relative; display:inline-block;">
    <canvas id="myChart" width="400" height="400"></canvas>
    <div id="centerDiamond">üíé</div>
  </div>
</div>

<script>
// Visitas
let visitas = localStorage.getItem("visitas")||0;
visitas++; 
localStorage.setItem("visitas", visitas);
document.getElementById("visitas").innerText=visitas;

// Confeti
function lanzarConfeti(){const duration=4000,end=Date.now()+duration;(function frame(){confetti({particleCount:10,startVelocity:3,gravity:0.25,spread:360,ticks:200,origin:{x:Math.random(),y:Math.random()*0.4},colors:['#ff0000','#00ff00','#0000ff','#ffff00','#ff00ff','#00ffff']});if(Date.now()<end)requestAnimationFrame(frame);})();}

// Sonido y vibraci√≥n
function beep(freq){const ctx=new (AudioContext||webkitAudioContext)(),o=ctx.createOscillator(),g=ctx.createGain();o.type="square";o.frequency.value=freq;o.connect(g);g.connect(ctx.destination);g.gain.setValueAtTime(.15,ctx.currentTime);o.start();o.stop(ctx.currentTime+.15);}
function vibrar(ms=80){if(navigator.vibrate)navigator.vibrate(ms);}

// Animar n√∫mero
function animateNumber(finalValue){
  const start=0,duration=2000,startTime=performance.now();
  function step(now){
    const p=Math.min((now-startTime)/duration,1);
    resultado.innerText="Valor total: "+Math.floor(start+(finalValue-start)*p)+" ‚Ç¨";
    if(p<1)requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

// Gr√°fico
let chart;
const centerDiamond=document.getElementById("centerDiamond");
function animateDiamond(){
  centerDiamond.style.display="block";
  let angle=0,dx=1.5,dy=1.2,posX=0,posY=0,maxOffset=70;
  function randomColor(){return `rgb(${Math.floor(Math.random()*256)},${Math.floor(Math.random()*256)},${Math.floor(Math.random()*256)})`;}
  function frame(){
    angle+=3; posX+=dx; posY+=dy;
    if(Math.abs(posX)>maxOffset) dx=-dx;
    if(Math.abs(posY)>maxOffset) dy=-dy;
    centerDiamond.style.transform=`translate(-50%,-50%) translate(${posX}px,${posY}px) rotate(${angle}deg)`;
    centerDiamond.style.color=randomColor();
    requestAnimationFrame(frame);
  }
  frame();
}

// C√°lculo
document.getElementById("calcBtn").addEventListener("click",function(){
  const bpass=+document.getElementById("bpass").value;
  const comunes=+document.getElementById("comunes").value;
  const raras=+document.getElementById("raras").value;
  const epicas=+document.getElementById("epicas").value;
  const miticas=+document.getElementById("miticas").value;
  const legendarias=+document.getElementById("legendarias").value;
  const hipercarga=+document.getElementById("hipercarga").value;
  const maxeados=+document.getElementById("maxeados").value;
  const total=bpass*20 + comunes*5 + raras*10 + epicas*15 + miticas*25 + legendarias*40 + hipercarga*30 + maxeados*50;
  animateNumber(total);
  lanzarConfeti();
  beep(440);vibrar();
  
  const data=[comunes,raras,epicas,miticas,legendarias,hipercarga,maxeados];
  const labels=["Comunes","Raras","Epicas","Miticas","Legendarias","Hipercarga","Maxeados"];
  const colors=["#00FFFF","#00FF00","#FF00FF","#FF0000","#FFFF00","#FF8800","#FFFFFF"];
  if(chart) chart.destroy();
  chart=new Chart(document.getElementById("myChart"),{
    type:"doughnut",
    data:{labels:labels,datasets:[{data:data,backgroundColor:colors}]},
    options:{plugins:{legend:{position:"bottom"}}}
  });
  
  animateDiamond(); // Inicia animaci√≥n del diamante
});

document.getElementById("clearBtn").addEventListener("click",function(){
  document.getElementById("calcForm").reset();
  document.getElementById("resultado").innerText="Valor total: 0 ‚Ç¨";
  if(chart) chart.destroy();
  centerDiamond.style.display="none";
});
</script>
</body>
</html>
