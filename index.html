<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculadora Brawl Stars</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Bangers', cursive;
  background: url('Personajes-Brawl-Stars.webp') no-repeat center center fixed;
  background-size: cover;
  position: relative;
  color: white;
  text-align: center;
}
body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(6px);
  z-index: 0;
}
.container {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 20px;
}
h1 {
  font-size: 3rem;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  color: transparent;
  background: linear-gradient(90deg, #00FFAA, #00CFFF, #FF00FF);
  -webkit-background-clip: text;
  position: relative;
}
h1 .diamond {
  animation: glow 2s infinite alternate;
}
@keyframes glow {
  0% { text-shadow: 0 0 5px rgba(255,255,255,0.5); }
  50% { text-shadow: 0 0 15px rgba(255,255,255,1); }
  100% { text-shadow: 0 0 5px rgba(255,255,255,0.5); }
}
form {
  background: rgba(0,0,0,0.5);
  border-radius: 20px;
  padding: 20px;
  max-width: 600px;
  width:90%;
  margin-bottom: 25px;
}
label{display:flex;justify-content:space-between;margin:8px 0;}
input{width:100px;text-align:center;border:none;border-radius:8px;}
.buttons{display:flex;justify-content:center;gap:25px;margin-top:15px;}
button{padding:10px 20px;border:none;border-radius:12px;font-family:'Bangers';font-size:1.5rem;color:white;cursor:pointer;}
#calcBtn {background:linear-gradient(90deg,#ff0080,#7928ca);}
#clearBtn{background:linear-gradient(90deg,#00CFFF,#0077FF);}
#shareBtn{background:linear-gradient(90deg,#00FFAA,#FF00FF);margin-top:20px;animation:pulse 1s infinite;}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
#resultado{margin-top:10px;font-size:1.8rem;color:#00FFAA;}
.visitas{margin-top:10px;font-size:1.4rem;color:#FFD700;}
canvas{margin-top:15px;max-width:400px;position:relative;}
#centerBrawler{
  position:absolute;
  width:100px;
  height:100px;
  display:none;
  z-index:5;
  filter: drop-shadow(0 0 10px #fff);
  pointer-events:none;
}
</style>
</head>
<body>
<div class="container">
  <h1><span class="diamond">ğŸ’</span> Calculadora Brawl Stars <span class="diamond">ğŸ’</span></h1>

  <form id="calcForm">
    <label>ğŸŸï¸ Brawl Pass: <input type="number" id="bpass" value="0"></label>
    <label>ğŸ©µ Comunes: <input type="number" id="comunes" value="0"></label>
    <label>ğŸ’š Raras: <input type="number" id="raras" value="0"></label>
    <label>ğŸ’œ Ã‰picas: <input type="number" id="epicas" value="0"></label>
    <label>â¤ï¸ MÃ­ticas: <input type="number" id="miticas" value="0"></label>
    <label>ğŸŒŸ Legendarias: <input type="number" id="legendarias" value="0"></label>
    <label>âš¡ Hipercarga: <input type="number" id="hipercarga" value="0"></label>
    <label>ğŸ”¥ Maxeados: <input type="number" id="maxeados" value="0"></label>
  </form>

  <div class="buttons">
    <button id="calcBtn">Calcular</button>
    <button id="clearBtn">Limpiar</button>
  </div>

  <button id="shareBtn">ğŸ“¤ Compartir</button>

  <div id="resultado"></div>
  <div class="visitas" id="visitas"></div>
  <div style="position:relative;display:inline-block;">
    <canvas id="myChart"></canvas>
    <img id="centerBrawler" src="" alt="Brawler">
  </div>
</div>

<script>
const ctx = document.getElementById('myChart').getContext('2d');
let myChart;

const brawlers = [
  "https://static.wikia.nocookie.net/brawlstars/images/d/d1/El_Primo_Skin-Default.png",
  "https://static.wikia.nocookie.net/brawlstars/images/1/12/Shelly_Skin-Default.png",
  "https://static.wikia.nocookie.net/brawlstars/images/7/70/Colt_Skin-Default.png",
  "https://static.wikia.nocookie.net/brawlstars/images/8/88/Nita_Skin-Default.png"
];

document.getElementById("calcBtn").addEventListener("click", function(e){
  e.preventDefault();

  const valores = [
    parseInt(document.getElementById("bpass").value)||0,
    parseInt(document.getElementById("comunes").value)||0,
    parseInt(document.getElementById("raras").value)||0,
    parseInt(document.getElementById("epicas").value)||0,
    parseInt(document.getElementById("miticas").value)||0,
    parseInt(document.getElementById("legendarias").value)||0,
    parseInt(document.getElementById("hipercarga").value)||0,
    parseInt(document.getElementById("maxeados").value)||0
  ];
  const total = valores.reduce((a,b)=>a+b,0);
  document.getElementById("resultado").textContent="Valor total: "+total;

  if(myChart) myChart.destroy();
  myChart=new Chart(ctx,{
    type:'doughnut',
    data:{
      labels:["Brawl Pass","Comunes","Raras","Epicas","Miticas","Legendarias","Hipercarga","Maxeados"],
      datasets:[{data:valores,backgroundColor:["#FFD700","#00CFFF","#00FFAA","#8000FF","#FF0040","#FF8000","#FF0000","#00FF00"]}]
    },
    options:{cutout:"70%"}
  });

  // Elegir Brawler aleatorio y mostrar en el centro
  const img=document.getElementById("centerBrawler");
  img.src=brawlers[Math.floor(Math.random()*brawlers.length)];
  img.style.display="block";

  // Posicionarlo centrado al canvas
  const canvas=document.getElementById("myChart");
  const rect=canvas.getBoundingClientRect();
  img.style.left=(canvas.width/2-50)+"px";
  img.style.top=(canvas.height/2-50)+"px";
});

document.getElementById("clearBtn").addEventListener("click",()=>{
  document.getElementById("calcForm").reset();
  document.getElementById("resultado").textContent="";
  if(myChart) myChart.destroy();
  document.getElementById("centerBrawler").style.display="none";
});
</script>
</body>
</html>
