<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculadora Brawl Stars</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&family=Orbitron:wght@700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
body {
  margin: 0;
  font-family: 'Bangers', cursive;
  background: url('Personajes-Brawl-Stars.webp') no-repeat center center fixed;
  background-size: cover;
  color: white;
  text-align: center;
  position: relative;
}
body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(6px);
  z-index: 0;
}
.container {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 20px;
}
h1 {
  font-size: 3rem;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  color: transparent;
  background: linear-gradient(90deg, #00FFAA, #00CFFF, #FF00FF);
  -webkit-background-clip: text;
}
h1 .diamond {
  animation: glow 3s infinite alternate;
}
@keyframes glow {
  0% { text-shadow: 0 0 5px rgba(255,255,255,0.5); }
  50% { text-shadow: 0 0 15px rgba(255,255,255,1); }
  100% { text-shadow: 0 0 5px rgba(255,255,255,0.5); }
}
form {
  background: rgba(0,0,0,0.5);
  border-radius: 60px;
  padding: 20px;
  max-width: 600px;
  width:90%;
  margin-bottom: 15px;
  display: flex;
  flex-direction: column;
  align-items: center;
}
label {
  display:flex;
  justify-content:space-between;
  margin:8px 0;
  width:100%;
}
input {
  width:100px;
  text-align:center;
  border:none;
  border-radius:8px;
}
.buttons {
  display:flex;
  justify-content:center;
  gap:25px;
  margin-top:15px;
}
button {
  padding:10px 20px;
  border:none;
  border-radius:12px;
  font-family:'Bangers';
  font-size:1.5rem;
  color:white;
  cursor:pointer;
  transition: transform .08s ease;
}
button:active {
  transform: scale(0.97);
}
#calcBtn {background:linear-gradient(90deg,#ff0080,#7928ca);}
#clearBtn{background:linear-gradient(90deg,#00CFFF,#0077FF);}
#shareBtn{background:linear-gradient(90deg,#00FFAA,#FF00FF); margin-top:20px; color:white;}
button.flash {box-shadow: 0 0 20px #fff,0 0 30px #fff,0 0 40px #fff; transition: box-shadow 0.2s ease;}
.metric-container {
  display: flex;
  justify-content: center;
  gap: 22px;
  margin-top: 18px;
}
.metric {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  font-family:'Orbitron', sans-serif;
  font-size: 2rem;
}
.metric .box {
  background: rgba(0,0,0,0.7);
  padding: 8px 18px;
  border-radius: 12px;
  min-width: 70px;
  text-align: center;
  font-weight: 700;
  user-select: none;
  transition: all 0.2s ease;
  cursor:pointer;
}
.metric.visitas .box { border: 2px solid #00CFFF; color: #00CFFF; box-shadow:0 0 10px #00CFFF,0 0 20px #00CFFF;}
.metric.likes .box { border: 2px solid #39ff14; color: #39ff14; box-shadow:0 0 10px #39ff14,0 0 20px #39ff14;}
.metric.dislikes .box { border: 2px solid #FF073A; color: #FF073A; box-shadow:0 0 10px #FF073A,0 0 20px #FF073A;}
canvas{
  margin-top:15px;
  max-width:400px;
  position:relative;
}
#centerDiamond {
  position: absolute;
  top: 43%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: none;
}
#centerDiamond img {
  width: 210px;
  height: 210px;
  border-radius: 50%;
  object-fit: contain;
  background: rgba(0,0,0,0.3);
}
#resultado { 
  margin:10px 0; 
  font-size:2rem;
  font-family:'Bangers';
  color:#00FF00;
  text-shadow:0 0 8px #00FF00,0 0 15px #00FF00;
}
.fade { opacity: 0; transition: opacity 0.3s; }
.show { opacity: 1; transition: opacity 0.3s; }
</style>
</head>
<body>
<div class="container">
<h1><span class="diamond">üíé</span> Calculadora Brawl Stars <span class="diamond">üíé</span></h1>
<form id="calcForm" onsubmit="return false;">
  <label>üéüÔ∏è Brawl Pass: <input type="number" min="0" id="bpass" value="0"></label>
  <label>ü©µ Comunes: <input type="number" min="0" id="comunes" value="0"></label>
  <label>üíö Raras: <input type="number" min="0" id="raras" value="0"></label>
  <label>üíú √âpicas: <input type="number" min="0" id="epicas" value="0"></label>
  <label>‚ù§Ô∏è M√≠ticas: <input type="number" min="0" id="miticas" value="0"></label>
  <label>üåü Legendarias: <input type="number" min="0" id="legendarias" value="0"></label>
  <label>‚ö° Hipercarga: <input type="number" min="0" id="hipercarga" value="0"></label>
  <label>üî• Maxeados: <input type="number" min="0" id="maxeados" value="0"></label>
</form>

<div id="resultado">Valor total: 0 ‚Ç¨</div>

<div class="buttons">
<button id="calcBtn">Calcular</button>
<button id="clearBtn">Limpiar</button>
</div>
<button id="shareBtn">üì§ Compartir</button>

<div class="metric-container">
  <div class="metric visitas">
    <span class="icon">üëÄ</span>
    <div class="box" id="visitas-counter">0</div>
  </div>
  <div class="metric likes">
    <span class="icon">üëç</span>
    <div class="box" id="likes-counter">0</div>
  </div>
  <div class="metric dislikes">
    <span class="icon">üëé</span>
    <div class="box" id="dislikes-counter">0</div>
  </div>
</div>

<div style="position:relative; display:inline-block;">
  <canvas id="myChart" width="400" height="400"></canvas>
  <div id="centerDiamond">
    <img id="brawlerImg" src="https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/elprimo.png" alt="Brawler">
  </div>
</div>

<script>
let chart;

/* Animaci√≥n valor total */
function incrementarValorAnimado(el, target){
  let start = 0;
  const duration = 800;
  const t0 = performance.now();
  function step(t){
    const p = Math.min((t-t0)/duration,1);
    el.innerText = 'Valor total: '+Math.floor(start + (target-start)*p)+' ‚Ç¨';
    if(p<1) requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

/* Confeti y fade */
function actualizarResultado(total){
  const resultadoEl = document.getElementById('resultado');
  resultadoEl.classList.remove('show');
  resultadoEl.classList.add('fade');
  void resultadoEl.offsetWidth;
  resultadoEl.classList.remove('fade');
  resultadoEl.classList.add('show');
  incrementarValorAnimado(resultadoEl,total);

  const diamond = document.getElementById('centerDiamond');
  const rect = diamond.getBoundingClientRect();
  const x = (rect.left + rect.width/2)/window.innerWidth;
  const y = (rect.top + rect.height/2)/window.innerHeight;

  const colors = ['#00FFFF','#00FF00','#FF00FF','#FFFF00','#FF4500','#00CFFF','#FF69B4','#FF0000'];
  for(let i=0;i<5;i++){
    setTimeout(() => {
      confetti({
        particleCount:50,
        spread:100,
        startVelocity:30 + i*5,
        gravity:0.4 + i*0.05,
        ticks:250,
        origin:{x,y},
        colors: colors,
        shapes:['square'],
        rotate:()=>Math.random()*360,
        tilt:()=>Math.random()*30-15,
        drift:()=> (Math.random()-0.5)*4,
        wobble:15,
        decay:0.9
      });
    }, i*100);
  }
}

/* Calcular */
function calcular(){
  const ids = ['bpass','comunes','raras','epicas','miticas','legendarias','hipercarga','maxeados'];
  const valoresInput = ids.map(id => Math.max(Number(document.getElementById(id).value)||0,0));
  const valores = {
    "üéüÔ∏è Brawl Pass": valoresInput[0]*10,
    "ü©µ Comunes": valoresInput[1]*2,
    "üíö Raras": valoresInput[2]*5,
    "üíú √âpicas": valoresInput[3]*10,
    "‚ù§Ô∏è M√≠ticas": valoresInput[4]*12,
    "üåü Legendarias": valoresInput[5]*15,
    "‚ö° Hipercarga": valoresInput[6]*20,
    "üî• Maxeados": valoresInput[7]*50
  };
  const total = Object.values(valores).reduce((a,b)=>a+b,0);
  actualizarResultado(total);

  // Crear gr√°fico
  const data = { 
    labels: Object.keys(valores), 
    datasets: [{ 
      data: Object.values(valores), 
      backgroundColor:["#00FFFF","#00FF00","#FF00FF","#FFFF00","#FF4500","#00CFFF","#FF69B4","#FF0000"], 
      borderWidth:2 
    }]
  };
  const config = { 
    type:'doughnut', 
    data, 
    options:{ cutout:"70%", plugins:{legend:{display:true,position:'bottom'}} }
  };
  if(chart) chart.destroy();
  chart = new Chart(document.getElementById('myChart').getContext('2d'), config);

  document.getElementById('centerDiamond').style.display="block";
  document.getElementById('myChart').scrollIntoView({behavior:'smooth', block:'center'});
}

/* Limpiar */
function limpiar(){
  document.getElementById("calcForm").reset();
  document.getElementById("resultado").innerText="Valor total: 0 ‚Ç¨";
  if(chart) { chart.destroy(); chart = null; }
  document.getElementById("centerDiamond").style.display="none";
  document.getElementById("calcForm").scrollIntoView({behavior:'smooth', block:'start'});
}

/* Brawler central animado */
const brawlers = [
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/elprimo.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/colt.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/nita.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/edgar.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/spike.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/penny.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/darryl.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/rico.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/mortis.png",
  "https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/bea.png"
];
let current = 0;
const brawlerImg = document.getElementById("brawlerImg");
setInterval(()=>{
  current = (current+1) % brawlers.length;
  brawlerImg.src = brawlers[current];
},3000);

/* Eventos botones */
document.getElementById("calcBtn").addEventListener("click",calcular);
document.getElementById("clearBtn").addEventListener("click",limpiar);
</script>
</body>
</html>
