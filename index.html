<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculadora Brawl Stars</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&family=Orbitron:wght@700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
body { margin:0; font-family:'Bangers',cursive; background:url('Personajes-Brawl-Stars.webp') no-repeat center center fixed; background-size:cover; color:white; text-align:center; position:relative; }
body::after{content:"";position:fixed;inset:0;background:rgba(0,0,0,0.5);backdrop-filter:blur(4px);z-index:0;}
.container{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;padding:15px;}
h1{font-size:2.5rem;margin-bottom:15px;display:flex;align-items:center;justify-content:center;gap:8px;color:#FFD700;text-shadow:-2px -2px 0 black,2px -2px 0 black,-2px 2px 0 black,2px 2px 0 black;}
h1 .diamond{font-size:2.5rem;color:#32CD32;text-shadow:0 0 4px #32CD32,0 0 8px #00FF00;animation:glow 1.5s infinite alternate;}
@keyframes glow{0%{text-shadow:0 0 4px #32CD32,0 0 8px #00FF00;}50%{text-shadow:0 0 8px #32CD32,0 0 16px #00FF00;}100%{text-shadow:0 0 4px #32CD32,0 0 8px #00FF00;}}

form{background:rgba(0,0,0,0.5);border-radius:40px;padding:15px;max-width:500px;width:90%;margin-bottom:12px;display:flex;flex-direction:column;align-items:center;border:2px solid #FFA500;}
label{display:flex;justify-content:space-between;margin:6px 0;width:100%;}
input{width:80px;text-align:center;border:none;border-radius:6px;}
.buttons{display:flex;justify-content:center;gap:15px;margin-top:12px;}
button{padding:8px 16px;border:none;border-radius:10px;font-family:'Bangers';font-size:1.2rem;color:white;cursor:pointer;transition:transform .08s ease;}
button:active{transform:scale(0.97);}
#calcBtn,#clearBtn{background:linear-gradient(90deg,#FFD700,#FFA500);color:black;}
#shareBtn{background:linear-gradient(90deg,#00FFAA,#FF00FF);margin-top:15px;}
#spinBtn{margin-top:8px;padding:6px 14px;font-size:1rem;background:linear-gradient(90deg,#FFA500,#FF8C00);color:#000;border-radius:10px;}
#resultado{margin:8px 0;font-size:1.8rem;color:#00FF00;text-shadow:0 0 6px #00FF00,0 0 12px #00FF00;}
canvas{margin-top:12px;max-width:350px;position:relative;}
#centerDiamond{position:absolute;top:43%;left:50%;transform:translate(-50%,-50%);}
#centerDiamond img{width:180px;height:180px;border-radius:50%;object-fit:contain;background:rgba(0,0,0,0.25);transition:all 0.3s ease;}
#centerDiamond img.finalGlow{box-shadow:0 0 15px #fff,0 0 30px #fff;}
</style>
</head>
<body>
<div class="container">
  <h1><span class="diamond">‚≠ê</span> Calculadora Brawl Stars <span class="diamond">‚≠ê</span></h1>
  <form id="calcForm">
    <label>üéüÔ∏è Brawl Pass: <input type="number" id="bpass" value="0"></label>
    <label>ü©µ Comunes: <input type="number" id="comunes" value="0"></label>
    <label>üíö Raras: <input type="number" id="raras" value="0"></label>
    <label>üíú √âpicas: <input type="number" id="epicas" value="0"></label>
    <label>‚ù§Ô∏è M√≠ticas: <input type="number" id="miticas" value="0"></label>
    <label>üåü Legendarias: <input type="number" id="legendarias" value="0"></label>
    <label>‚ö° Hipercarga: <input type="number" id="hipercarga" value="0"></label>
    <label>üî• Maxeados: <input type="number" id="maxeados" value="0"></label>
  </form>

  <div id="resultado">Valor total: 0 ü™ô</div>
  <div class="buttons">
    <button id="calcBtn">Calcular</button>
    <button id="clearBtn">Limpiar</button>
  </div>

  <button id="shareBtn">üì§ Compartir</button>
  <button id="spinBtn">üé≤ Girar Brawler</button>

  <canvas id="myChart" width="400" height="400"></canvas>
  <div id="centerDiamond">
    <img id="brawlerImg" src="" alt="Brawler">
  </div>
</div>

<script type="module">
// C√≥digo JS optimizado para m√≥viles
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
document.addEventListener('DOMContentLoaded',()=>{
const supabase=createClient('https://ttkneykkrkbajymzsgcr.supabase.co','tu-key-aqui');
const allBrawlers=["elprimo","colt","nita","spike","penny"];
const brawlerCache={};
allBrawlers.forEach(name=>{const img=new Image();img.src=`https://raw.githubusercontent.com/ErikBrawlTT/brawl-calculadora/main/Brawlers/${name}.png`;brawlerCache[name]=img;});

const brawlerImg=document.getElementById('brawlerImg');
let chart;

function calcular(){
const vals=['bpass','comunes','raras','epicas','miticas','legendarias','hipercarga','maxeados'].map(id=>Number(document.getElementById(id).value)||0);
const valores={"üéüÔ∏è Brawl Pass":vals[0]*10,"ü©µ Comunes":vals[1]*2,"üíö Raras":vals[2]*5,"üíú √âpicas":vals[3]*10,"‚ù§Ô∏è M√≠ticas":vals[4]*12,"üåü Legendarias":vals[5]*15,"‚ö° Hipercarga":vals[6]*20,"üî• Maxeados":vals[7]*50};
const total=Object.values(valores).reduce((a,b)=>a+b,0);
document.getElementById('resultado').innerText=`Valor total: ${total} ü™ô`;

const data={labels:Object.keys(valores),datasets:[{data:Object.values(valores),backgroundColor:["#0FF","#0F0","#F0F","#FF0","#F50","#0CF","#F69","#F00"],borderWidth:2}]};
if(chart)chart.destroy();
chart=new Chart(document.getElementById('myChart').getContext('2d'),{type:'doughnut',data,options:{cutout:'70%',plugins:{legend:{display:true,position:'bottom'}}}});
confetti({particleCount:50,spread:50,origin:{y:0.6}});
}

document.getElementById('calcBtn').addEventListener('click',calcular);
document.getElementById('clearBtn').addEventListener('click',()=>{
document.getElementById('calcForm').reset();
document.getElementById('resultado').innerText="Valor total: 0 ü™ô";
if(chart)chart.destroy();
brawlerImg.className="";
});

function spinBrawler(){
const idx=Math.floor(Math.random()*allBrawlers.length);
brawlerImg.src=brawlerCache[allBrawlers[idx]].src;
brawlerImg.className="finalGlow";
confetti({particleCount:30,spread:60,origin:{y:0.5}});
}
document.getElementById('spinBtn').addEventListener('click',spinBrawler);

// Inicializa brawler del d√≠a
spinBrawler();
});
</script>
</body>
</html>
