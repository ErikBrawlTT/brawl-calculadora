<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora Brawl Stars</title>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Bangers', cursive;
      background: url('Personajes-Brawl-Stars.webp') no-repeat center center fixed;
      background-size: cover;
      position: relative;
    }
    body::after {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      backdrop-filter: blur(6px);
      z-index: 0;
    }
    .container {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      color: white;
      text-align: center;
    }
    h1 {
      font-size: 3rem;
      margin-bottom: 20px;
      background: linear-gradient(90deg, #00FFFF, #FF00FF, #FFD700);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    .diamond {
      font-size: 2.5rem;
      color: #00eaff;
      animation: glow 1.5s infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 5px #0ff, 0 0 10px #0ff; }
      to { text-shadow: 0 0 20px #0ff, 0 0 40px #0ff; }
    }
    form {
      background: rgba(0,0,0,0.5);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.7);
      width: 90%;
      max-width: 600px;
    }
    label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
      font-size: 1.2rem;
    }
    input {
      width: 100px;
      padding: 5px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      text-align: center;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1.5rem;
      border: none;
      border-radius: 12px;
      background: linear-gradient(90deg, #ff0080, #7928ca);
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px rgba(255,0,128,0.8);
    }
    button:hover {
      box-shadow: 0 0 25px rgba(255,0,128,1);
      transform: scale(1.05);
    }
    #resultado {
      margin-top: 20px;
      font-size: 1.5rem;
      color: #00FFAA;
      text-shadow: 2px 2px 4px #000;
      transition: all 0.3s ease;
    }
    canvas {
      margin-top: 20px;
    }
    .visitas {
      margin-top: 30px;
      font-size: 1.4rem;
      color: #FFD700;
      text-shadow: 2px 2px 5px #000;
    }
    #shareBtn {
      margin-top: 15px;
      padding: 8px 20px;
      font-size: 1.3rem;
      background: linear-gradient(90deg, #00FFAA, #FF00FF);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      animation: pulse 1s infinite;
      color: white;
    }
    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 0 10px #fff; }
      50% { transform: scale(1.1); box-shadow: 0 0 20px #ff0; }
      100% { transform: scale(1); box-shadow: 0 0 10px #fff; }
    }
    .shake {
      animation: shake 0.5s;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
    #fireworksCanvas {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      pointer-events: none;
      z-index: 9999;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1><span class="diamond">üíé</span> Calculadora Brawl Stars <span class="diamond">üíé</span></h1>
    <form id="calcForm">
      <label>üéüÔ∏è Brawl Pass: <input type="number" id="bpass" value="0"></label>
      <label>üëï Skins Comunes: <input type="number" id="comunes" value="0"></label>
      <label>üíö Skins Raras: <input type="number" id="raras" value="0"></label>
      <label>üíú Skins √âpicas: <input type="number" id="epicas" value="0"></label>
      <label>‚ù§Ô∏è Skins M√≠ticas: <input type="number" id="miticas" value="0"></label>
      <label>üåü Skins Legendarias: <input type="number" id="legendarias" value="0"></label>
      <label>‚ö° Skins Hipercarga: <input type="number" id="hipercarga" value="0"></label>
      <label>üî• Brawlers Maxeados: <input type="number" id="maxeados" value="0"></label>
      <button type="button" onclick="calcular()">Calcular</button>
    </form>
    <div id="resultado">Valor total: 0 ‚Ç¨</div>
    <canvas id="myChart" width="400" height="400"></canvas>
    <button id="shareBtn" onclick="compartir()">üì§ Compartir</button>

    <!-- Contador de visitas -->
    <div class="visitas">
      üëÄ Visitas: <span id="visitas">7.156</span>
    </div>
  </div>

  <canvas id="fireworksCanvas"></canvas>
  <audio id="brawlSound" src="https://freesound.org/data/previews/495/495411_10226512-lq.mp3"></audio>

  <script>
    let chart;

    function calcular() {
      const valores = {
        "üéüÔ∏è Brawl Pass": document.getElementById("bpass").value * 10,
        "üëï Comunes": document.getElementById("comunes").value * 2,
        "üíö Raras": document.getElementById("raras").value * 5,
        "üíú √âpicas": document.getElementById("epicas").value * 10,
        "‚ù§Ô∏è M√≠ticas": document.getElementById("miticas").value * 12,
        "üåü Legendarias": document.getElementById("legendarias").value * 15,
        "‚ö° Hipercarga": document.getElementById("hipercarga").value * 20,
        "üî• Maxeados": document.getElementById("maxeados").value * 50
      };
      const total = Object.values(valores).reduce((a,b) => a+b, 0);
      const resultadoDiv = document.getElementById("resultado");
      resultadoDiv.innerText = "Valor total: " + total + " ‚Ç¨";
      resultadoDiv.classList.add("shake");
      setTimeout(() => resultadoDiv.classList.remove("shake"), 500);

      const data = {
        labels: Object.keys(valores),
        datasets: [{
          data: Object.values(valores),
          backgroundColor: [
            "#1E90FF", "#CCCCCC", "#00FF00", "#800080", "#FF0000", "#FFD700", "#FF8C00", "#FF1493"
          ],
          borderColor: "#111",
          borderWidth: 2
        }]
      };

      if (chart) chart.destroy();
      const ctx = document.getElementById("myChart").getContext("2d");
      chart = new Chart(ctx, { type: "doughnut", data: data, options: { plugins: { legend: { labels: { color: "white", font: { size: 14 }}}}}});

      // Sonido
      const sound = document.getElementById("brawlSound");
      sound.currentTime = 0;
      sound.play();

      // Fuegos artificiales
      lanzarFuegos();
    }

    // Compartir
    function compartir() {
      if (navigator.share) {
        navigator.share({ title: 'Calculadora Brawl Stars', url: window.location.href });
      } else {
        navigator.clipboard.writeText(window.location.href);
        alert("¬°Enlace copiado! Comp√°rtelo con tus amigos.");
      }
    }

    // Contador de visitas
    fetch('https://api.countapi.xyz/hit/calculadora-brawl/vercel')
      .then(response => response.json())
      .then(data => { document.getElementById('visitas').innerText = data.value; })
      .catch(err => console.error("Error contador:", err));

    // Fuegos artificiales
    function lanzarFuegos() {
      const canvas = document.getElementById("fireworksCanvas");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const particles = [];
      const colors = ["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"];

      for(let i=0;i<100;i++){
        particles.push({
          x: Math.random()*canvas.width,
          y: Math.random()*canvas.height/2,
          radius: Math.random()*3+2,
          color: colors[Math.floor(Math.random()*colors.length)],
          dx: (Math.random()-0.5)*4,
          dy: Math.random()*-5-2,
          alpha: 1
        });
      }

      const duration = 4000; // 4 segundos
      const start = Date.now();

      function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach(p => {
          p.x += p.dx; p.y += p.dy; p.alpha -= 0.01;
          ctx.beginPath();
          ctx.arc(p.x,p.y,p.radius,0,Math.PI*2);
          ctx.fillStyle = `rgba(${parseInt(p.color.slice(1,3),16)},${parseInt(p.color.slice(3,5),16)},${parseInt(p.color.slice(5,7),16)},${p.alpha})`;
          ctx.fill();
        });
        if(Date.now()-start < duration) requestAnimationFrame(animate);
        else ctx.clearRect(0,0,canvas.width,canvas.height);
      }
      animate();
    }
  </script>
</body>
</html>
