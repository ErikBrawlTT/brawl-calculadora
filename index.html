<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Calculadora Brawl Stars</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
<style>
  body {
    margin: 0;
    font-family: 'Bangers', cursive;
    background: url('Personajes-Brawl-Stars.webp') no-repeat center center fixed;
    background-size: cover;
    position: relative;
    color: white;
    text-align: center;
  }
  body::after {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(6px);
    z-index: 0;
  }
  .container {
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    padding: 20px;
  }
  h1 {
    font-size: 3rem;
    margin-bottom: 20px;
    background: linear-gradient(90deg, #00FFFF, #FF00FF, #FFD700);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }
  .diamond {
    font-size: 2.5rem;
    color: #00eaff;
    animation: glow 1.5s infinite alternate;
  }
  @keyframes glow {
    from { text-shadow: 0 0 5px #0ff, 0 0 10px #0ff; }
    to { text-shadow: 0 0 20px #0ff, 0 0 40px #0ff; }
  }
  form {
    background: rgba(0,0,0,0.5);
    border-radius: 20px;
    padding: 20px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.7);
    width: 90%;
    max-width: 600px;
    margin-bottom: 30px;
  }
  label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 10px 0;
    font-size: 1.2rem;
  }
  input {
    width: 100px;
    padding: 5px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
    text-align: center;
  }
  .buttons {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 40px;
    flex-wrap: wrap;
  }
  button {
    padding: 10px 20px;
    font-size: 1.5rem;
    border: none;
    border-radius: 12px;
    color: white;
    cursor: pointer;
    transition: all 0.2s ease;
    font-family: 'Bangers', cursive;
  }
  button:active {
    transform: scale(0.92);
    filter: brightness(1.4);
  }
  #calcBtn {
    background: linear-gradient(90deg, #ff0080, #7928ca);
    box-shadow: 0 0 15px rgba(255,0,128,0.8);
  }
  #clearBtn {
    background: linear-gradient(90deg, #00CFFF, #0077FF);
    box-shadow: 0 0 15px rgba(0,255,255,0.8);
  }
  #shareBtn {
    background: linear-gradient(90deg, #00FFAA, #FF00FF);
    animation: pulse 1s infinite;
    box-shadow: 0 0 15px rgba(0,255,170,0.8);
  }
  @keyframes pulse {
    0% { transform: scale(1); box-shadow: 0 0 10px #fff; }
    50% { transform: scale(1.1); box-shadow: 0 0 20px #ff0; }
    100% { transform: scale(1); box-shadow: 0 0 10px #fff; }
  }
  #resultado {
    margin-top: 20px;
    font-size: 1.8rem;
    color: #00FFAA;
    text-shadow: 2px 2px 4px #000;
    transition: all 0.3s ease;
  }
  canvas {
    margin-top: 20px;
    max-width: 400px;
  }
  .visitas {
    margin-top: 15px;
    font-size: 1.4rem;
    color: #FFD700;
    text-shadow: 2px 2px 5px #000;
  }
</style>
</head>
<body>
<div class="container">
  <h1><span class="diamond">üíé</span> Calculadora Brawl Stars <span class="diamond">üíé</span></h1>
  <form id="calcForm">
    <label>üéüÔ∏è Brawl Pass: <input type="number" id="bpass" value="0"></label>
    <label>ü©µ Skins Comunes: <input type="number" id="comunes" value="0"></label>
    <label>üíö Skins Raras: <input type="number" id="raras" value="0"></label>
    <label>üíú Skins √âpicas: <input type="number" id="epicas" value="0"></label>
    <label>‚ù§Ô∏è Skins M√≠ticas: <input type="number" id="miticas" value="0"></label>
    <label>üåü Skins Legendarias: <input type="number" id="legendarias" value="0"></label>
    <label>‚ö° Skins Hipercarga: <input type="number" id="hipercarga" value="0"></label>
    <label>üî• Brawlers Maxeados: <input type="number" id="maxeados" value="0"></label>
  </form>

  <div class="buttons">
    <button id="calcBtn">Calcular</button>
    <button id="clearBtn">Limpiar</button>
    <button id="shareBtn">üì§ Compartir</button>
  </div>

  <div id="resultado">Valor total: 0 ‚Ç¨</div>
  <div class="visitas">üëÄ Visitas: <span id="visitas">7.156</span></div>
  <canvas id="myChart" width="400" height="400"></canvas>
</div>

<script>
// Sonido simple
function playBeep(freq, duration=120) {
  try {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    osc.type = "square";
    osc.frequency.value = freq;
    osc.connect(gain);
    gain.connect(ctx.destination);
    osc.start();
    gain.gain.setValueAtTime(0.2, ctx.currentTime);
    osc.stop(ctx.currentTime + duration/1000);
  } catch (e) {
    console.log("Audio no soportado", e);
  }
}

// Vibraci√≥n
function vibrar(ms=100) {
  if (navigator.vibrate) navigator.vibrate(ms);
}

let chart;

function calcular() {
  playBeep(600);
  vibrar();

  const valores = {
    "üéüÔ∏è Brawl Pass": document.getElementById("bpass").value*10,
    "ü©µ Comunes": document.getElementById("comunes").value*2,
    "üíö Raras": document.getElementById("raras").value*5,
    "üíú √âpicas": document.getElementById("epicas").value*10,
    "‚ù§Ô∏è M√≠ticas": document.getElementById("miticas").value*12,
    "üåü Legendarias": document.getElementById("legendarias").value*15,
    "‚ö° Hipercarga": document.getElementById("hipercarga").value*20,
    "üî• Maxeados": document.getElementById("maxeados").value*50
  };
  const total = Object.values(valores).reduce((a,b)=>a+b,0);
  document.getElementById("resultado").innerText = "Valor total: " + total + " ‚Ç¨";

  const data = {
    labels: Object.keys(valores),
    datasets: [{
      data: Object.values(valores),
      backgroundColor: ["#1E90FF","#CCCCCC","#00FF00","#800080","#FF0000","#FFD700","#FF8C00","#FF1493"],
      borderColor: "#111",
      borderWidth: 2
    }]
  };

  if(chart) chart.destroy();
  const ctx = document.getElementById("myChart").getContext("2d");
  chart = new Chart(ctx, {
    type: 'doughnut',
    data: data,
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'bottom',
          labels: { color: 'white', font: { size: 14 } }
        },
        tooltip: {
          callbacks: {
            label: function(context) {
              return context.label + ': ' + context.raw + ' ‚Ç¨';
            }
          }
        }
      }
    }
  });

  // üéÜ EFECTO FUEGOS ARTIFICIALES RGB (4 segundos)
  const duration = 4 * 1000;
  const end = Date.now() + duration;

  (function frame() {
    confetti({
      particleCount: 100,
      startVelocity: 40,
      spread: 360,
      ticks: 60,
      origin: { x: Math.random(), y: Math.random() * 1.8 },
      colors: ['#ff0000','#00ff00','#0000ff','#ffff00','#ff00ff','#00ffff']
    });
    if (Date.now() < end) requestAnimationFrame(frame);
  })();
}

function limpiar() {
  playBeep(400);
  vibrar(80);
  document.getElementById("calcForm").reset();
  document.getElementById("resultado").innerText = "Valor total: 0 ‚Ç¨";
  if(chart) chart.destroy();
}

function compartir() {
  playBeep(800);
  vibrar(120);
  if (navigator.share) {
    navigator.share({
      title: 'Calculadora Brawl Stars',
      text: '¬°Mira mi c√°lculo!',
      url: window.location.href
    }).catch(console.log);
  } else {
    alert('Tu navegador no soporta compartir directamente. Usa copiar enlace.');
  }
}

document.getElementById("calcBtn").addEventListener("click", e=>{ e.preventDefault(); calcular(); });
document.getElementById("clearBtn").addEventListener("click", e=>{ e.preventDefault(); limpiar(); });
document.getElementById("shareBtn").addEventListener("click", e=>{ e.preventDefault(); compartir(); });
</script>
</body>
</html>
